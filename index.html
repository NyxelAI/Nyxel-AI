<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Nyxel AI - Math Friendly Chatbot</title>
<style>
  body { font-family: Arial, sans-serif; background: #121212; color: #eee; }
  #chatbox { width: 600px; max-width: 90vw; margin: 2rem auto; background: #222; padding: 1rem; border-radius: 8px; }
  #messages { height: 400px; overflow-y: auto; border: 1px solid #555; padding: 10px; background: #111; border-radius: 6px; }
  .message { margin-bottom: 1rem; }
  .user { color: #6cf; }
  .bot { color: #9f6; }
  #inputArea { margin-top: 1rem; display: flex; }
  #inputArea input { flex-grow: 1; padding: 10px; border-radius: 6px 0 0 6px; border: none; font-size: 1rem; }
  #inputArea button { padding: 10px 20px; background: #3a3; border: none; border-radius: 0 6px 6px 0; color: white; font-weight: bold; cursor: pointer; }
  #inputArea button:hover { background: #4c4; }
</style>
</head>
<body>

<div id="chatbox">
  <div id="messages"></div>
  <div id="inputArea">
    <input id="userInput" placeholder="Say something or type math (e.g. 4 * 5)" autocomplete="off" />
    <button onclick="sendMessage()">Send</button>
  </div>
</div>

<script>
  const messages = document.getElementById('messages');
  const input = document.getElementById('userInput');

  function evalMath(expr) {
    expr = expr.replace(/\s+/g, '');
    if (!/^[0-9+\-*/().]+$/.test(expr)) return null;
    if (/[\+\*\/]{2,}/.test(expr)) return null;

    let stack = [];
    for (let char of expr) {
      if (char === '(') stack.push(char);
      else if (char === ')') {
        if (stack.length === 0) return null;
        stack.pop();
      }
    }
    if (stack.length !== 0) return null;

    try {
      let result = eval(expr);
      if (typeof result === 'number' && !isNaN(result) && isFinite(result)) {
        return Math.round(result * 1e6) / 1e6;
      }
    } catch {
      return null;
    }
    return null;
  }

  function botResponse(text) {
    text = text.toLowerCase();

    if (/\b(help|commands|options|what can you do|how to use)\b/.test(text)) {
      return `You can ask me about math (e.g. 4 + 5), jokes, memes, time, date, or just chat! Try saying "joke", "time", or "meme".`;
    }

    if (/\b(lol|haha|hehe|rofl|lmao|xd|lul)\b/.test(text)) {
      return "Haha!";
    }

    if (/\b(hi|hello|hey|yo|sup|howdy|greetings|good morning|good afternoon|good evening|hey there)\b/.test(text)) {
      return "Hello! How can I assist you today?";
    }

    if (/\b(bye|goodbye|see you|farewell|later|catch you|take care)\b/.test(text)) {
      return "Goodbye! Hope to chat again soon.";
    }

    if (/\b(thanks|thank you|thx|ty|much appreciated|cheers)\b/.test(text)) {
      return "You're welcome! Glad I could help.";
    }

    if (text.includes('time')) {
      const now = new Date();
      return `The current time is ${now.toLocaleTimeString()}.`;
    }
    if (text.includes('date')) {
      const now = new Date();
      return `Today's date is ${now.toLocaleDateString()}.`;
    }

    if (text.includes('joke') || text.includes('funny')) {
      return `Why don't scientists trust atoms? Because they make up everything!`;
    }

    if (text.includes('meme')) {
      return `Memes are the language of the internet, full of humor and inside jokes that connect people worldwide.`;
    }

    if (text.includes('name') || text.includes('who are you') || text.includes('yourself')) {
      return `I am Nyxel AI, your clever assistant ready to chat and help you anytime.`;
    }

    const mathResult = evalMath(text);
    if (mathResult !== null) {
      return `The answer is ${mathResult}.`;
    }

    return `I'm here to chat about anything you want. Type "help" if you want some ideas!`;
  }

  function appendMessage(sender, message) {
    const div = document.createElement('div');
    div.classList.add('message', sender);
    div.textContent = message;
    messages.appendChild(div);
    messages.scrollTop = messages.scrollHeight;
  }

  function sendMessage() {
    const text = input.value.trim();
    if (!text) return;
    appendMessage('user', text);
    input.value = '';
    setTimeout(() => {
      const reply = botResponse(text);
      appendMessage('bot', reply);
    }, 300);
  }

  input.addEventListener('keydown', e => {
    if (e.key === 'Enter') sendMessage();
  });

  // Initial greeting
  appendMessage('bot', "Hi! I'm Nyxel AI, ask me anything!");
</script>

</body>
</html>
